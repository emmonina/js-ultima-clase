<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <!--<meta name="viewport" content="width=script, initial-scale=1.0">-->
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="./js/personas.js"></script>
    <script src="./js/personas2.js"></script>
    <script src="./js/index.js"></script>
    <title>Document</title>
</head>
<body>
    <button id="btn">Clickeame</button>
    <script>
        let numeros = [23, 45, 5, 104, 35];
        let nombres = ["Juan", "Ana", "ana", "Nicolas", "Karina", "Carina"];
        //console.log(numeros.sort(function(a,b){
        console.log(nombres.sort(function(a,b){
            return a>b ? 1 : -1;;
            //return b-a;
        }));

        console.log(personas.sort(function(a,b){
            if(a.last_name > b.last_name){
                return 1;
            }else{
                return -1;
            }
        }));

        //Para ordenar por más de un criterio la sentencia puede ser:
        // xx.sort().sort().sort();
        console.log(personas
            .sort((a,b)=>{return a.gender > b.gender ? -1 : 1;})
            .sort((a,b)=>{return a.last_name > b.last_name ? -1 : 1;})
        );

        //La otra forma es:
        console.log(personas.sort(function(a,b){
            let swap = 1;
            if(a.gender == b.gender && a.last_name.localeCompare(b.last_name) == -1){
                swap = -1;
            }else if (a.gender > b.gender){
                swap = -1;
            }
            return swap;
        }));

        //ForEach de un vector pasa tres parámetros: Valor, índice, vector completo
        //Ejemplo, duplico los valores del array
        
        console.log(numeros);
        
        numeros.forEach(function (a, b){
            numeros[b] = numeros[b] * 2;
        });

        console.log(numeros);

        //La funcion ".map" crea un nuevo array en base a otro generado con los returns de la función que contiene

        let cuadrados = numeros.map(a => a*a);
        console.log(cuadrados);

        let nombreGen = personas.map(function(a){
            return {nombre:a.first_name, apellido: a.last_name, sexo: a.gender};
        });
        console.log(nombreGen);

        //La función ".some" devuelve true o false si se cumple la condición de la fucnión que contiene en ALGUNO de los elementos del array
        console.log(nombres.some(function(a){
            //return a == "Zoilo"; //Devuelve false porque no hay ningún "Zoilo" en el array
            return a == "ana"; //Devuelve true porque hay una "ana" en el array
        }));

        //La función ".every" devuelve true o false si se cumple la condición de la fucnión que contiene en TODOS los elementos del array
        console.log(numeros.every(function(a){
            //return a % 2 == 0; //Devuelve true porque los elementos del array son todos pares
            return a % 3 == 0; //Devuelve false porque no todos los elementos del array son divisibles por 3
        }));

        //La función ".filter" devuelve un array con los elementos que cumplen determinada condición
        let varonesFilter = personas.filter(function(a){
            return a.gender == "Male";
        });
        console.log(varonesFilter);

        //Es lo mismo que:
        let varonesFilter2 = personas.filter((a)=>a.gender === "Male");
        console.log(varonesFilter2);

        //Puedo concatenar funciones por ejemplo traer los nombres de todas las mujeres concatenando las funciones .filter y .map
        let nombreMujeres = personas.filter((a)=>a.gender === "Female").map((a)=>a.first_name);
        console.log(nombreMujeres);

        //Función ".reduce" toma como "anterior" al valor que retorna en la función en cada iteración
        //Por ejemplo se puede usar para sumar todos los valores de un array
        //".reduce" devuelve sólo un valor
        let x = numeros.reduce(function(a, b, c, d){
            console.log(a);
            console.log(b);
            console.log(c);
            console.log(d);
            return a+b;
        });
        console.log(x);

        //Para contar elementos es necesario pasarle un "0" como primer valor "anterior" después de la fucnión pero dentro de ".reduce"
        let cantidadNombres = nombres.reduce(function(ant, act){
            return ant + 1;
        }, 0);
        console.log("Hay " + cantidadNombres + " nombres en el array 'nombres'!!");

        //Para sacar el promedio de Edad de las mujeres de un vector de objetos
        let promedioEdadFem = personas2.filter(function(p){
            return p.genero === 'Female'; //Primero filtro a las mujeres
        })
        .map(function(p){
            return p.edad; //Armo un array nuevo con las Edades de las mujeres
        })
        .reduce(function(ant, actual, indice, arr){
            return ant + actual/arr.length; //Calculo el promedio
        },0);
        console.log(promedioEdadFem);

</script>
</body>
</html>